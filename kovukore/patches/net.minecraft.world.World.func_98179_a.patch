# net.minecraft.world.World.func_98179_a($1, $2, $3, $4)
{
	if ($4 == net.minecraft.world.EnumSkyBlock.Sky && this.canBlockSeeTheSky($1, $2, $3))
	{
		return 15;
	}
	else
	{
		int l = this.getBlockId($1, $2, $3);
		net.minecraft.block.Block block = net.minecraft.block.Block.blocksList[l];
		int blockLight = (block == null ? 0 : block.getLightValue(this, $1, $2, $3));
		int currentLight = $4 == net.minecraft.world.EnumSkyBlock.Sky ? 0 : blockLight;
		int opacity = (block == null ? 0 : block.getLightOpacity(this, $1, $2, $3));
		if (opacity >= 15 && blockLight > 0)
		{
			opacity = 1;
		}
		if (opacity < 1)
		{
			opacity = 1;
		}
		if (opacity >= 15)
		{
			return 0;
		}
		else
		{
			for (int faceIndex = 0; faceIndex < 6; ++faceIndex)
			{
				int l1 = $1 + net.minecraft.util.Facing.offsetsXForSide[faceIndex];
				int i2 = $2 + net.minecraft.util.Facing.offsetsYForSide[faceIndex];
				int j2 = $3 + net.minecraft.util.Facing.offsetsZForSide[faceIndex];
				int neighboorLight = this.getSavedLightValue($4, l1, i2, j2);
				int ll = neighboorLight & 15;
				int rl = neighboorLight & 480;
				int gl = neighboorLight & 15360;
				int bl = neighboorLight & 491520;
				ll -= opacity;
				rl -= 32 * opacity;
				gl -= 1024 * opacity;
				bl -= 32768 * opacity;
				if (ll > (currentLight & 15))
				{
					currentLight = (currentLight & 507360) | ll;
				}
				if (rl > (currentLight & 480))
				{
					currentLight = (currentLight & 506895) | rl;
				}
				if (gl > (currentLight & 15360))
				{
					currentLight = (currentLight & 492015) | gl;
				}
				if (bl > (currentLight & 491520))
				{
					currentLight = (currentLight & 15855) | bl;
				}
			}
			return currentLight;
		}
	}
}
